apiVersion: batch/v1
kind: Job
metadata:
  name: copy-data-to-pvc
  namespace: airflow
spec:
  template:
    spec:
      containers:
      - name: copy-data
        image: busybox:latest
        command: ["sh", "-c"]
        args:
          - |
            echo "Copying data from host to PVC..."
            cp -r /host-data/* /pvc-data/ 2>/dev/null || echo "Data already exists"
            ls -la /pvc-data/
            echo "Data copy complete!"
        volumeMounts:
        - name: host-data
          mountPath: /host-data
        - name: pvc-data
          mountPath: /pvc-data
      volumes:
      - name: host-data
        hostPath:
          path: /mnt/host/data
          type: Directory
      - name: pvc-data
        persistentVolumeClaim:
          claimName: fraud-data-pvc
      restartPolicy: Never
  backoffLimit: 3
